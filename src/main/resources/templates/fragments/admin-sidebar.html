<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Admin Sidebar Fragment -->
<aside th:fragment="sidebar" class="w-72 bg-white dark:bg-background-dark border-r border-[#f0f4f2] dark:border-white/10 flex flex-col justify-between p-6 shrink-0 z-20">
    <!-- Header/Logo Section -->
    <div class="flex flex-col gap-8">
        <div class="flex items-center gap-3">
            <div class="bg-primary/20 p-2 rounded-lg">
                <span class="material-symbols-outlined text-[#111813] dark:text-primary leading-none">vaccines</span>
            </div>
            <div class="flex flex-col">
                <h1 class="text-[#111813] dark:text-white text-base font-bold leading-none">Hệ thống Quản lý</h1>
                <p class="text-[#61896f] text-xs font-medium">Admin Dashboard</p>
            </div>
        </div>
        
        <!-- User Profile -->
        <div class="flex flex-col gap-4 border-t border-[#f0f4f2] dark:border-white/10 pt-6" th:if="${isAuthenticated}">
            <div class="flex items-center gap-3 px-2" th:if="${currentUser != null}">
                <div class="bg-primary/20 rounded-full size-10 border-2 border-primary flex items-center justify-center">
                    <span class="text-primary font-bold text-lg" th:text="${currentUser.fullName != null ? #strings.substring(currentUser.fullName, 0, 1) : 'AD'}">AD</span>
                </div>
                <div class="flex flex-col overflow-hidden min-w-0">
                    <p class="text-sm font-bold truncate text-[#111813] dark:text-white" th:text="${currentUser.fullName != null ? currentUser.fullName : currentUser.email}">Admin</p>
                    <p class="text-[10px] text-[#61896f] uppercase tracking-wider">Quản trị viên</p>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="flex flex-col gap-1">
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/home') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/home}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/home') ? 'text-primary' : ''}">dashboard</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/home') ? 'font-bold' : ''}">Tổng quan</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/vaccines') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/vaccines}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/vaccines') ? 'text-primary' : ''}">inventory_2</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/vaccines') ? 'font-bold' : ''}">Quản lý Vaccine</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/users') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/users}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/users') ? 'text-primary' : ''}">group</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/users') ? 'font-bold' : ''}">Người dùng</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/appointments') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/appointments}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/appointments') ? 'text-primary' : ''}">calendar_month</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/appointments') ? 'font-bold' : ''}">Lịch hẹn</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/staff') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/staff}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/staff') ? 'text-primary' : ''}">badge</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/staff') ? 'font-bold' : ''}">Nhân viên</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/centers') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/centers}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/centers') ? 'text-primary' : ''}">domain</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/centers') ? 'font-bold' : ''}">Trung tâm tiêm chủng</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/adverse-reactions') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/adverse-reactions}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/adverse-reactions') ? 'text-primary' : ''}">report_problem</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/adverse-reactions') ? 'font-bold' : ''}">Phản ứng phụ</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/notifications') and not #strings.contains(#httpServletRequest.requestURI, '/notifications') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/notifications}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/notifications') and not #strings.contains(#httpServletRequest.requestURI, '/notifications') ? 'text-primary' : ''}">campaign</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/notifications') and not #strings.contains(#httpServletRequest.requestURI, '/notifications') ? 'font-bold' : ''}">Quản lý Thông báo</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/reports') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/reports}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/reports') ? 'text-primary' : ''}">bar_chart</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/reports') ? 'font-bold' : ''}">Thống kê & Báo cáo</p>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors relative text-[#61896f] hover:bg-[#f0f4f2] dark:hover:bg-white/5" 
               th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/settings') ? 'bg-primary/10 text-[#111813] dark:text-primary border-l-4 border-primary' : ''}"
               th:href="@{/admin/settings}">
                <span class="material-symbols-outlined" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/settings') ? 'text-primary' : ''}">settings</span>
                <p class="text-sm font-semibold" th:classappend="${#httpServletRequest != null and #strings.contains(#httpServletRequest.requestURI, '/admin/settings') ? 'font-bold' : ''}">Cài đặt</p>
            </a>
        </nav>
    </div>
    
    <!-- Logout -->
    <div class="flex flex-col gap-4 border-t border-[#f0f4f2] dark:border-white/10 pt-6">
        <form th:action="@{/api/auth/logout}" method="post" class="inline w-full">
            <button type="submit" class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                <span class="material-symbols-outlined text-sm">logout</span>
                <p class="text-sm font-semibold">Đăng xuất</p>
            </button>
        </form>
    </div>
</aside>

<style>
    .active-nav-admin {
        background-color: rgba(19, 236, 91, 0.1) !important;
        border-left: 4px solid #13ec5b;
        color: #111813 !important;
    }
    .active-nav-admin .material-symbols-outlined {
        color: #13ec5b !important;
    }
</style>
</body>
</html>

